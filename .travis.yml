language: java

jdk:
  - oraclejdk8

script:
  - "mvn test"

deploy:
  provider: openshift
  # Configure these values on your TravisCI 'Repository Settings' page:
  # http://docs.travis-ci.com/user/environment-variables/#Using-Settings
  user: $EMAIL_ADDRESS
  password:
    secret: $PASSWORD_SECRET
  app: $APP_NAME
  domain: $DOMAIN_NAME
  on:
    branch: master
  
after_success:
  - bash <(curl -s https://codecov.io/bash)
  - "[[ $TRAVIS_PULL_REQUEST == false ]] && mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent package sonar:sonar -Dsonar.host.url=https://sonarqube.com -Dsonar.login=${SONAR_TOKEN}"

